% Copyright Rupert Deese 2015
% Licensed under the GNU GPL http://www.gnu.org/licenses/gpl.txt

\documentclass[22pt]{article}

\usepackage{xcolor}
\usepackage{amsmath}
\definecolor{maroon}{HTML}{800000}
\definecolor{red}{HTML}{FF0000}
\definecolor{green}{HTML}{008000}
\definecolor{blue}{HTML}{0000FF}
\definecolor{teal}{HTML}{00FFFF}

\newcommand*{\mathcolor}{}
\def\mathcolor#1#{\mathcoloraux{#1}}
\newcommand*{\mathcoloraux}[3]{%
  \protect\leavevmode
  \begingroup
    \color#1{#2}#3%
  \endgroup
}

\begin{document}
$$a^{+} = a + \mathcolor{maroon}{g_1}a + \mathcolor{red}{g_2}v + \frac {1} {\lvert N \rvert} \sum_{x \in N}\bigg(\mathcolor{green}{g_3}(a_x-a)+\mathcolor{blue}{g_4}(v_x-v)+\mathcolor{teal}{g_5}(p_x-p)\bigg)$$
where:
\begin{align*}
a&~ \text{is the boid's acceleration}\\
v&~ \text{is its velocity}\\
p&~ \text{is its position}\\
N&~ \text{is the set of neighboring boids}\\
x&~ \text{is a particular neighbor}\\
a^{+}&~ \text{is the boid's new acceleration}
\end{align*}

$$\{ \mathcolor{maroon}{g_1}, \mathcolor{red}{g_2}, \mathcolor{green}{g_3}, \mathcolor{blue}{g_4}, \mathcolor{teal}{g_5} \}$$ 


\end{document}
